#!/usr/bin/env sh

sedi() {
  # Run different sed -i arguments based on GNU vs BSD sed
  # See https://stackoverflow.com/a/38595160
  if sed --version >/dev/null 2>&1 ; then
    sed -i"" "$@"
  else
    sed -i "" "$@"
  fi
}

# This inserts the rendered state docs into the readme.
# Avoids issues with rendering the final readme on Gitea etc.
sedi '/<INSERT_STATES>/{
  s/<INSERT_STATES>//g
  r docs/states.rst
}' docs/README.rst
